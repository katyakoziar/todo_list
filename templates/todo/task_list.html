{% extends "base.html" %}

{% block content %}
  <h1><strong>TODO LIST
   <a href="{% url 'todo:task-create' %}" class="btn btn-primary link-to-page" style="float: right">Add task</a>
  </strong></h1>



  {% if task_list %}
    {% for task in task_list %}
      <div class="card" style="width: 100%; background-color: lavender">
        <div class="card-body">
          <h5 class="card-title"><strong>{{ task.content }}
            {% if task.is_completed %}
              <span style="color: green;">Done</span>
              <form method="post" action="{% url 'todo:task_toggle_status' pk=task.pk %}">
                {% csrf_token %}
                <input type="submit" value="Undo" class="btn btn-secondary" style="float: right">
              </form>
            {% else %}
              <span style="color: red;">Not done</span>
              <form method="post" action="{% url 'todo:task_toggle_status' pk=task.pk %}">
                {% csrf_token %}
                <input type="submit" value="Complete" class="btn btn-success" style="float: right">
              </form>
            {% endif %}
          </strong></h5>
          <h6 class="card-subtitle mb-2 text-muted">
            {% if task.created_at %}
              Created: {{ task.created_at|date:"F j, Y, g:i a" }}
            {% endif %}
            {% if task.created_at and task.deadline %}
              |
            {% endif %}
            {% if task.deadline %}
              Deadline: {{ task.deadline|date:"F j, Y, g:i a" }}
            {% endif %}
          </h6>
          <strong>Tags:</strong> {{ task.tags.all|join:", " }}
          <a href="{% url 'todo:task-update' pk=task.pk %}">Update</a> |
          <a href="{% url 'todo:task-delete' pk=task.pk %}">Delete</a> |
        </div>
      </div>

    {% endfor %}

  {% else %}
    <p>There are no tasks.</p>
  {% endif %}
{% endblock %}
